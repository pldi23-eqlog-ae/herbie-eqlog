<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Using Herbie from the Command Line</title>
  <link rel='stylesheet' type='text/css' href='../../main.css'>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script type="text/javascript" src="toc.js"></script>
</head>
<body>
  <header>
    <a href="../../"><img class="logo" src="../../logo.png" /></a>
    <h1>Using Herbie from the Command Line</h1>
  </header>

  <p>Herbie can be used from the command-line or
  from <a href="using-web.html">the browser</a>. This page covers
  using Herbie from the command line.</p>

  <h2 id="interactive">The Herbie shell</h2>

  <p>
    The Herbie shell lets you interact with Herbie: you type in input
    expressions and Herbie prints their more accurate versions. Run
    the Herbie shell with this command:
  </p>

  <pre class="shell">herbie shell
Herbie 1.4 with seed 2098242187
Find help on https://herbie.uwplse.org/, exit with Ctrl-D
<strong>herbie&gt;</strong> </pre>


  <p>
    Herbie prints a seed, which you can <a href="options.html">use to
    reproduce</a> a Herbie run, and links you to documentation. Then,
    it waits for inputs, which you can type directly into your
    terminal in <a href="input.html">FPCore format</a>:
</p>

  <pre><strong>herbie&gt;</strong> (FPCore (x) (- (+ 1 x) x))
(FPCore
  (x)
  <var>...</var>
  1.0)</pre>

  <p>Herbie suggests that <code>1</code> is more accurate than the
  original expression <code>(- (+ 1 x) x)</code>. The
  the <var>...</var> elides 
  <a href="input.html#properties">additional information</a> provided
  by Herbie.</p>

  <p>The Herbie shell makes it easy to play with different expressions
  and try multiple variants, informed by Herbie's advice.</p>

  <h2 id="batch">Batch processing FPCores</h2>

  <p>
    Alternatively, you can run Herbie on a file with multiple
    expressions in it, writing Herbie's versions of each to a file.
    This mode is intended for use by scripts.
  </p>

  <pre class="shell">herbie improve bench/tutorial.fpcore out.fpcore
Starting Herbie on 3 problems (seed: 1809676410)...
  1/3   [   1.799s]   39→ 0     Expanding a square
  2/3   [   3.256s]    0→ 0     Commute and associate
  3/3   [   0.937s]   29→ 0     Cancel like terms</pre>

  <p>
    The output file <code>out.fpcore</code> contains more accurate
    versions of each program:
  </p>

  <pre>;; seed: 1809676410

(FPCore (x) <var>...</var> 1.0)
(FPCore (x) <var>...</var> (* x (+ x 2.0)))
(FPCore (x y z) <var>...</var> 0.0)</pre>

  <p>
    Note that output file is in the same order as the input file. For
    more control over Herbie, see the documentation of
    Herbie's <a href="options.html">command-line options</a>.
  </p>

</body>
</html>
